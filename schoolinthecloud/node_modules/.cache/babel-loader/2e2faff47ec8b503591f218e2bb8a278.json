{"ast":null,"code":"var _jsxFileName = \"/Users/amber/Lambda/03_Web Applications II/04_unit-3-build/Unit2-3-Frontend/schoolinthecloud/src/components/forms/SignInForm.js\";\nimport React, { useState, useEffect } from 'react';\nimport * as yup from 'yup';\nimport axios from 'axios'; // import styler class for styled components\n// import Styler from \"../../assets/styles/styledComponents/styleClass\";\n\nexport default function SignInForm(props) {\n  // create new instance of styler class\n  // const style = new Styler();\n  // set up yup validation\n  const formSchema = yup.object().shape({\n    userName: yup.string().required('Please enter your username').min(4, 'Username should be longer than 4 characters'),\n    password: yup.string().required('Please enter your password').min(3, 'Password should be longer than 3 characters')\n  }); // Form state and error state respectively\n\n  const [formState, setFormState] = useState({\n    userName: '',\n    password: ''\n  });\n  const [errorState, setErrorState] = useState({\n    userName: '',\n    password: ''\n  }); // validation on input change\n\n  const validate = e => {\n    yup.reach(formSchema, e.target.name).validate(e.target.value).then(valid => {\n      setErrorState({ ...errorState,\n        [e.target.name]: ''\n      });\n    }).catch(err => {\n      setErrorState({ ...errorState,\n        [e.target.name]: err.errors[0]\n      });\n    });\n  };\n\n  const formSubmit = e => {\n    console.log('submit');\n    console.log(formState);\n    e.preventDefault();\n    axios.post('/login', {\n      formState\n    }).then(response => {\n      console.log(response);\n    }).then(response => {\n      localStorage.setItem('token', response.data.payload);\n      props.history.push('/protected');\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const inputChange = e => {\n    e.persist();\n    console.log(e.target.value);\n    validate(e);\n    setFormState({ ...formState,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: formSubmit,\n    className: \"signInForm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"signInTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"userName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 4\n    }\n  }, \"Username:\", /*#__PURE__*/React.createElement(\"input\", {\n    className: \"signInInput\",\n    type: \"text\",\n    name: \"userName\",\n    id: \"userName\",\n    value: formState.userName,\n    onChange: inputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  })), errorState.userName.length > 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, errorState.userName) : null, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 4\n    }\n  }, \"Password:\", /*#__PURE__*/React.createElement(\"input\", {\n    className: \"signInInput\",\n    type: \"password\",\n    name: \"password\",\n    id: \"password\",\n    value: formState.password,\n    onChange: inputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  })), errorState.password.length > 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  }, errorState.password) : null, /*#__PURE__*/React.createElement(style.Button, {\n    text: \"login\",\n    type: \"submit\",\n    margin: \"10px auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 4\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/amber/Lambda/03_Web Applications II/04_unit-3-build/Unit2-3-Frontend/schoolinthecloud/src/components/forms/SignInForm.js"],"names":["React","useState","useEffect","yup","axios","SignInForm","props","formSchema","object","shape","userName","string","required","min","password","formState","setFormState","errorState","setErrorState","validate","e","reach","target","name","value","then","valid","catch","err","errors","formSubmit","console","log","preventDefault","post","response","localStorage","setItem","data","payload","history","push","inputChange","persist","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport * as yup from 'yup';\nimport axios from 'axios';\n\n// import styler class for styled components\n// import Styler from \"../../assets/styles/styledComponents/styleClass\";\n\nexport default function SignInForm(props) {\n\t// create new instance of styler class\n\t// const style = new Styler();\n\n\t// set up yup validation\n\tconst formSchema = yup.object().shape({\n\t\tuserName: yup\n\t\t\t.string()\n\t\t\t.required('Please enter your username')\n\t\t\t.min(4, 'Username should be longer than 4 characters'),\n\t\tpassword: yup\n\t\t\t.string()\n\t\t\t.required('Please enter your password')\n\t\t\t.min(3, 'Password should be longer than 3 characters'),\n\t});\n\n\t// Form state and error state respectively\n\tconst [formState, setFormState] = useState({\n\t\tuserName: '',\n\t\tpassword: '',\n\t});\n\n\tconst [errorState, setErrorState] = useState({\n\t\tuserName: '',\n\t\tpassword: '',\n\t});\n\n\t// validation on input change\n\tconst validate = (e) => {\n\t\tyup.reach(formSchema, e.target.name)\n\t\t\t.validate(e.target.value)\n\t\t\t.then((valid) => {\n\t\t\t\tsetErrorState({\n\t\t\t\t\t...errorState,\n\t\t\t\t\t[e.target.name]: '',\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tsetErrorState({\n\t\t\t\t\t...errorState,\n\t\t\t\t\t[e.target.name]: err.errors[0],\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\tconst formSubmit = (e) => {\n\t\tconsole.log('submit');\n\t\tconsole.log(formState);\n\t\te.preventDefault();\n\t\taxios\n\t\t\t.post('/login', { formState })\n\t\t\t.then((response) => {\n\t\t\t\tconsole.log(response);\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tlocalStorage.setItem('token', response.data.payload);\n\t\t\t\tprops.history.push('/protected');\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t};\n\n\tconst inputChange = (e) => {\n\t\te.persist();\n\t\tconsole.log(e.target.value);\n\t\tvalidate(e);\n\t\tsetFormState({ ...formState, [e.target.name]: e.target.value });\n\t};\n\n\treturn (\n\t\t<form onSubmit={formSubmit} className=\"signInForm\">\n\t\t\t<h2 className=\"signInTitle\">Sign In</h2>\n\n\t\t\t<label htmlFor=\"userName\">\n\t\t\t\tUsername:\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"signInInput\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tname=\"userName\"\n\t\t\t\t\tid=\"userName\"\n\t\t\t\t\tvalue={formState.userName}\n\t\t\t\t\tonChange={inputChange}\n\t\t\t\t/>\n\t\t\t</label>\n\n\t\t\t{errorState.userName.length > 0 ? (\n\t\t\t\t<p className=\"error\">{errorState.userName}</p>\n\t\t\t) : null}\n\n\t\t\t<label htmlFor=\"password\">\n\t\t\t\tPassword:\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"signInInput\"\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tid=\"password\"\n\t\t\t\t\tvalue={formState.password}\n\t\t\t\t\tonChange={inputChange}\n\t\t\t\t/>\n\t\t\t</label>\n\n\t\t\t{errorState.password.length > 0 ? (\n\t\t\t\t<p className=\"error\">{errorState.password}</p>\n\t\t\t) : null}\n\n\t\t\t<style.Button text=\"login\" type=\"submit\" margin=\"10px auto\" />\n\t\t</form>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}